<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.15, user-scalable=no">
    <meta name="format-detection" content="telephone=no" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="MobileOptimized" content="200" />
    <meta name="HandheldFriendly" content="True" />
    <meta name="robots" content="noindex,nofollow" />
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <script src="https://forms.yandex.ru/_static/embed.js"></script>
    <style>
        body{
	        color: #000000;
	        background: #FFFFFF;
	        display: block;
	        flex-direction: column;
	        align-items: center;
	        font-size: 20px;
		width: 100%;
		height: 100%;
            }
        .hint{
	        color: var(--tg-theme-hint-color);
            }
        .link{
        	color: var(--tg-theme-link-color);
        }
        .button{
        	background: var(--tg-theme-button-color);
        	color: var(--tg-theme-button-text-color);
        	border: none;
        	font-size: 18px;
        }
        .button:not(:last-child){
        	margin-bottom: 20px
        }
    </style>
</head>
    <body>
        <div class="body">
		<div id="text-container" contenteditable="true" style="text-align: center;"><strong>Привет, </strong></div>
		<iframe id="iframe" frameborder="0" name="ya-form-668e55ae2530c24b27c69ea5" scrolling="yes" src=""></iframe>
        </div>
    </body>
<script>
	var startParam = window.Telegram.WebApp.initDataUnsafe.start_param;
	if (startParam != undefined) {
		var startParam = startParam.split('_')
		if (startParam[0] == "reg") {
			var action = "102662277";
			var answerUserID = "&answer_choices_52985821=";
		}
		else if (startParam[0] == "work") {
			var action = "102662359";
			var answerUserID = "&answer_choices_53058026=";
		}
		else if (startParam[0] == "edit") {
			var action = "102662360";
			var answerUserID = "&id-question-53059802=";
		}
		else if (startParam[0] == "comp") {
			var action = "102662361";
			var answerUserID = "&id-question-53071577=";
		}
		else if (startParam[0] == "other") {
			var action = "103406632";
		}
		else {
			var action = "102662277";
		}
	
		if (startParam[1] == undefined) {
			var ticketID = "";
		}
		else {
			var ticketID = "&answer_short_text_53031114="+ startParam[1] +"/"+ startParam[2];
		}
	}
	else {
		var answerUserID = "&answer_choices_52985821=";
		var action = "102662277";
		var ticketID = "";
	}
	
	
	var textToInsert = window.Telegram.WebApp.initDataUnsafe.user.first_name;
	var textContainer = document.getElementById("text-container");
	textContainer.innerHTML += textToInsert + "!";
	var userId = window.Telegram.WebApp.initDataUnsafe.user.id;
	document.getElementById("iframe").src = "https://forms.yandex.ru/u/668e55ae2530c24b27c69ea5/?iframe=1&answer_choices_53030971="+ action + answerUserID + userId + ticketID;
</script>
</html>
